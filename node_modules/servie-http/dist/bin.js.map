{"version":3,"file":"bin.js","sourceRoot":"","sources":["../src/bin.ts"],"names":[],"mappings":";;;AAEA,2BAA4B;AAC5B,+BAA4B;AAC5B,+BAAoC;AACpC,mCAAwC;AAExC,MAAM,IAAI,GAAG,GAAG,CAAC;IACf,QAAQ,EAAE,OAAO;IACjB,QAAQ,EAAE,MAAM;IAChB,QAAQ,EAAE,MAAM;IAChB,OAAO,EAAE,MAAM;IACf,YAAY,EAAE,MAAM;IAEpB,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,YAAY;IAClB,IAAI,EAAE,OAAO;CACd,CAAC,CAAC;AAEH,MAAM,EACJ,QAAQ,EAAE,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,EACjD,QAAQ,EAAE,IAAI,EACd,QAAQ,EAAE,IAAI,EACd,YAAY,EAAE,QAAQ,GAAG,SAAS,EAClC,OAAO,EAAE,GAAG,GAAG,EAAE,EAClB,GAAG,IAAI,CAAC;AAET,IAAI,IAAI,EAAE;IACR,OAAO,CAAC,GAAG,CAAC;;;;;;;2EAO6D,IAAI;wEACP,QAAQ;4EACJ,IAAI,CAAC,SAAS,CAClF,GAAG,CACJ;GACJ,CAAC,CAAC;IAEH,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;CACjB;AAED,uDAAuD;AACvD,IAAI,CAAC,IAAI;IAAE,MAAM,IAAI,SAAS,CAAC,2BAA2B,CAAC,CAAC;AAE5D,MAAM,GAAG,GAAG,OAAO,CAAC,WAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC;AAC/C,MAAM,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;AAEjE,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;IAC9B,MAAM,IAAI,SAAS,CACjB,qCAAqC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAC3D,CAAC;CACH;AAED,MAAM,GAAG,GAAG,qBAAa,CAAC,IAAI,CAAC,CAAC;AAEhC,mBAAY,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE;IAC5C,OAAO,CAAC,GAAG,CAAC,sCAAsC,IAAI,EAAE,CAAC,CAAC;AAC5D,CAAC,CAAC,CAAC","sourcesContent":["#!/usr/bin/env node\n\nimport arg = require(\"arg\");\nimport { join } from \"path\";\nimport { createServer } from \"http\";\nimport { createHandler } from \"./index\";\n\nconst args = arg({\n  \"--help\": Boolean,\n  \"--file\": String,\n  \"--port\": Number,\n  \"--key\": String,\n  \"--hostname\": String,\n\n  \"-h\": \"--help\",\n  \"-f\": \"--file\",\n  \"-p\": \"--port\",\n  \"-H\": \"--hostname\",\n  \"-k\": \"--key\"\n});\n\nconst {\n  \"--port\": port = Number(process.env.PORT) || 3000,\n  \"--help\": help,\n  \"--file\": file,\n  \"--hostname\": hostname = \"0.0.0.0\",\n  \"--key\": key = \"\"\n} = args;\n\nif (help) {\n  console.log(`\n    Description\n      Start a HTTP server based on Servie.js\n    Usage\n      $ servie-http -p <port> -f <script.js> -k default\n    Options\n      --file, -f      The file to resolve which exports an app to serve over HTTP\n      --port, -p      The port number on which to start the application (${port})\n      --hostname, -H  The hostname on which to start the application (${hostname})\n      --key, -k       The property of \"--file\" exporting the application (${JSON.stringify(\n        key\n      )})\n  `);\n\n  process.exit(0);\n}\n\n// The `--file` argument is the only required argument.\nif (!file) throw new TypeError(\"Missing `--file` argument\");\n\nconst pkg = require(join(process.cwd(), file));\nconst main = key ? pkg[key] : pkg.__esModule ? pkg.default : pkg;\n\nif (typeof main !== \"function\") {\n  throw new TypeError(\n    `Invalid \"main\" function exported: ${JSON.stringify(key)}`\n  );\n}\n\nconst app = createHandler(main);\n\ncreateServer(app).listen(port, hostname, () => {\n  console.log(`Server running on http://localhost:${port}`);\n});\n"]}